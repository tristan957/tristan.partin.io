<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<!--https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy-->
	<!--Use "script-src 'self'" here in order to facilitate Hugo's live reload in built-in server-->
	<meta http-equiv="content-security-policy" content="default-src 'none'; font-src 'self'; style-src 'self' 'unsafe-inline'; script-src {{ if .Site.IsServer }}'self' {{ end }}'unsafe-inline' https://utteranc.es; img-src 'self' https:; media-src 'self' https:; connect-src 'self'; frame-src https://utteranc.es">
	<meta name="referrer" content="no-referrer">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	{{ hugo.Generator }}
	<meta name="title" content="{{ .Title }} - {{ .Site.Author.name }}">
	<meta
		name="description"
		content="{{ if .Summary }}{{ .Summary }}{{ else }}{{ .Site.Params.defaultDescription }}{{ end }}"
	>
	<meta name="author" content="{{ .Site.Author.name }}">
	<meta name="rating" content="general">

	{{ if eq .Type "blog" }}
		<meta property="og:type" content="article">
		<meta property="og:article:author" content="{{ .Site.Author.name }}">
		<meta property="og:article:published_time" content="{{ .Date }}">
		<meta property="og:article:modified_time" content="{{ .Lastmod }}">
		{{ range .Params.tags }}
			<meta property="og:article:tag" content="{{ . | strings.ToLower }}">
		{{ end }}
	{{ else }}
		<meta property="og:type" content="website">
	{{ end }}
	<meta property="og:title" content="{{ .Title }} - {{ .Site.Author.name }}">
	<meta property="og:url" content="{{ .Permalink }}">
	<meta
		property="og:description"
		content="{{ if .Summary }}{{ .Summary }}{{ else }}{{ .Site.Params.defaultDescription }}{{ end }}"
	>
	<meta property="og:locale" content="{{ replace .Site.LanguageCode "-" "_" }}">
	{{ with .Site.Params.siteImage }}
		{{ $siteImage := resources.Get .resourcePath }}
		<meta property="og:image" content="{{ $siteImage.Permalink }}">
		<meta property="og:image:secure_url" content="{{ $siteImage.Permalink }}">
		<meta property="og:image:alt" content="{{ .alt }}">
		<meta property="og:image:type" content="{{ $siteImage.MediaType }}">
		<meta property="og:image:width" content="{{ $siteImage.Width }}">
		<meta property="og:image:height" content="{{ $siteImage.Height }}">
	{{ end }}

	<!--Show large image on Twitter-->
	<meta name="twitter:card" content="summary_large_image">

	<!--Filter out taxonomy pages-->
	{{ if .Data.Singular }}
		<meta name="robots" content="noindex">
	{{ end }}

	{{ $styleCss := resources.Get "css/style.css" | minify | fingerprint }}
	<link rel="preload" href="{{ $styleCss.RelPermalink }}" type="text/css" as="style">
	<link rel="stylesheet" href="{{ $styleCss.RelPermalink }}" type="text/css">

	{{ range .AlternativeOutputFormats -}}
		{{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .RelPermalink $.Site.Title | safeHTML }}
	{{ end -}}

	<style>
		:root {
			--color: black;
			--main-background-color: #fffaf0;
			--consistent-link-color: blue;
			--content-metadata-color: #484848;
			--box-shadow-container-color: #cccccc;
			--raised-backgroud-color: white;
			--primary-accent-color: #f48024;
			--secondary-accent-color: #77216f;
			--secondary-accent-color-hover: #833a72;
			--blockquote-background-color: #e5e5e5;
			--border-radius: 3px;
		}

		@media (prefers-color-scheme: dark) {
			:root {
				--color: white;
				--main-background-color: #2d2d2d;
				--consistent-link-color: #7DB3E3;
				--content-metadata-color: #d4d4d4;
				--box-shadow-container-color: #222222;
				--raised-backgroud-color: #393939;
				--blockquote-background-color: #1B1B1B;
			}
		}

		[site-theme="dark"]:root {
			--color: white;
			--main-background-color: #2d2d2d;
			--consistent-link-color: #7db3e3;
			--content-metadata-color: #d4d4d4;
			--box-shadow-container-color: #222222;
			--raised-backgroud-color: #393939;
			--blockquote-background-color: #1b1b1b;
		}
	</style>

	<noscript>
		<style>
			/* Remove double margin when #comments-section is not displayed */
			#single-container > *:nth-last-child(2) {
				margin-bottom: 0 !important;
			}

			.no-js {
				display: none !important;
			}
		</style>
	</noscript>

	<script type="text/javascript">
		function isDarkModeEnabled() {
			const siteThemeFromStorage = window.localStorage.getItem("site-theme");
			return (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
				&& siteThemeFromStorage !== "light") || siteThemeFromStorage === "dark";
		}

		function switchTheme(theme) {
			if (theme === "dark") {
				document.documentElement.setAttribute("site-theme", "dark");
				window.localStorage.setItem("site-theme", "dark");
			} else {
				document.documentElement.setAttribute("site-theme", "light");
				window.localStorage.setItem("site-theme", "light");
			}
		}

		function overrideTheme(button) {
			if (!isDarkModePreferred) {
				isDarkModePreferred = true;
				button.innerHTML = "Light Theme";
				switchTheme("dark");
			} else {
				isDarkModePreferred = false;
				button.innerHTML = "Dark Theme";
				switchTheme("light");
			}
		}
	</script>

	<style>
		.hidden {
			height: 0;
		}
	</style>

	<title>{{ .Title }} - {{ .Site.Author.name }}</title>
	<link rel="canonical" href="{{ .Permalink }}" />
	<link rel="icon" type="image/x-icon" href="/favicon.ico" />
</head>
