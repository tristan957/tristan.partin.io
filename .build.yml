image: alpine/edge
oauth: pages.sr.ht/PAGES:RW
packages:
  - go
  - hugo
  - shellcheck
sources:
  - https://git.sr.ht/~tristan957/tristan.partin.io
tasks:
  - lint: |
      cd tristan.partin.io
      shellcheck $(find scripts/ -type f)
  - openring: |
      cd tristan.partin.io
      ./scripts/openring/build.sh
  - build: |
      cd tristan.partin.io
      ./scripts/openring/generate.sh
      hugo --baseURL=https://tristan957.srht.site
  - package: |
      cd tristan.partin.io
      tar -C public -cvz . > site.tar.gz
  - upload: |
      cd tristan.partin.io
      acurl -f https://pages.sr.ht/publish/tristan957.srht.site -Fcontent=@site.tar.gz
